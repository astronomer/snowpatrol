<div id="chart" class="chart"></div>
<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function () {
        // Ensure Plotly is loaded before using it
        if (typeof Plotly !== 'undefined') {
            var plotlyData = {{ plot_data | safe }};
            Plotly.newPlot('chart', plotlyData.data, plotlyData.layout);
        } else {
            console.error("Plotly library not found. Make sure it is properly loaded.");
        }
    });
</script>
</div>
