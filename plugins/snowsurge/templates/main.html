{% extends base_template %}

{% block head_js %}
{{ super() }}
<script src="{{ url_for('static', filename='js/htmx.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/idiomorph.min.js') }}"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
{% endblock %}

{% block head_css %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static',filename='css/styles.css') }}">
{% endblock %}

{% block page_title %}
Snowsurge Anomaly Detection
{% endblock %}

{% block content %}
<div id="content">
    <div class="content-layout" id="#content-layout">
        <div class="container-fluid">
            <div class="row">
                <h1>Chart</h1>
            </div>
            <div class="row">
                <div id="chart" class="chart"></div>
                <script type="text/javascript">
                    document.addEventListener("DOMContentLoaded", function () {
                        // Ensure Plotly is loaded before using it
                        if (typeof Plotly !== 'undefined') {
                            var plotlyData = {{ plotly_data | safe }};
                            Plotly.newPlot('chart', plotlyData.data, plotlyData.layout);
                        } else {
                            console.error("Plotly library not found. Make sure it is properly loaded.");
                        }
                    });
                </script>
            </div>
        </div>
    </div>
</div>
{% endblock %}
